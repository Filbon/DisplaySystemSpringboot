<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <meta charset="UTF-8">
    <title>Calendars</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/newStyle.css}">
</head>
<body>
<div th:each="calendar : ${calendars}" th:if="${not #lists.isEmpty(calendar.events)}" class="logo-container">
    <img th:src="@{/css/KTH_logo_RGB_vit.png}" class="logo" alt="Logo">
</div>
<div th:each="calendar : ${calendars}" class="calendar">
    <table>
        <tr>
            <th colspan="2"><p id="currentDateTime"></p></th>
        </tr>
        <tr th:if="${calendar.events.isEmpty()}">
            <td colspan="2">
                <div class="free-overlay">
                    <img th:src="@{/css/KTH_logo_RGB_vit.png}" alt="KTH-logo">
                </div>
            </td>
        </tr>
        <tr th:each="event, status : ${calendar.events}" th:class="${status.index == 0} ? 'upcoming-event' : ''">
            <td th:text="${event.summary}" th:class="'summary'"></td>
            <td>
                <span th:text="${#dates.format(event.startDate, 'HH:mm')}"></span>
                <span> - </span>
                <span th:text="${#dates.format(event.endDate, 'HH:mm')}"></span>
            </td>
        </tr>
    </table>
</div>
<script>
    function updateCurrentDateTime() {
        // Get the current date and time
        var currentDate = new Date();

        // Format the date and time as desired
        var formattedDate = currentDate.toLocaleDateString(); // Format: "5/3/2024"
        var formattedTime = currentDate.toLocaleTimeString(); // Format: "10:30:15 AM"

        // Concatenate the strings
        var dateTimeString = "Today's meetings - " + formattedDate + ", " + formattedTime;

        // Update the HTML element with the concatenated string
        document.getElementById("currentDateTime").innerHTML = dateTimeString;
    }

    updateCurrentDateTime();

    setInterval(updateCurrentDateTime, 1000);

    setInterval(function() {
        location.reload();
    }, 5*60*1000); // 5 minutes in milliseconds



</script>
</body>
</html>
